# 实现一个指定时间后执行相应Job的功能

参考的是google gvisor/pkg/tcpip/timer.go的实现

但是这个有个问题，就是它的实现过程用到了一个锁，AfterFunc之前会先尝试获取这个锁，但是实际上这个锁并没有什么作用。

主要是这个 Job 每次都是创建一个独立的 Job，并不存在并发调度多个 Job 的问题，所以不太理解它这个设计用意是什么

我的理解是，使用同一个 mutex 来管理很多个 Job 的启动关闭，这样的话，才会出现锁竞争的情况，如果每个Job都去自己创建一个锁的话，每个 Job 都完成自己独立的任务，不存在锁竞争的问题。

看了下在 gvisor 中的使用方法，确实是使用了同一个锁，但是具体为什么这么设计没看懂

如果说只是想要实现一个指定时间后执行的功能，直接使用time.AfterFunc其实就可以了，加上要取消的功能就可以了，好像不需要这么麻烦。



